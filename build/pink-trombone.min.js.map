{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./script/audio/nodes/constantSource/AudioNode.js","webpack:///./script/audio/nodes/noise/AudioNode.js","webpack:///./script/audio/nodes/pinkTrombone/processors/ParameterDescriptors.js","webpack:///./script/audio/nodes/pinkTrombone/processors/SimplexNoise.js","webpack:///./script/audio/nodes/pinkTrombone/processors/Glottis.js","webpack:///./script/audio/nodes/pinkTrombone/processors/Nose.js","webpack:///./script/audio/nodes/pinkTrombone/processors/Transient.js","webpack:///./script/audio/nodes/pinkTrombone/processors/Tract.js","webpack:///./script/audio/nodes/pinkTrombone/processors/Processor.js","webpack:///./script/audio/nodes/pinkTrombone/AudioNode.js","webpack:///./script/PinkTrombone.js","webpack:///./script/graphics/TractUI.js","webpack:///./script/graphics/GlottisUI.js","webpack:///./script/graphics/ButtonsUI.js","webpack:///./script/graphics/PinkTromboneUI.js","webpack:///./script/component.js"],"names":["Math","clamp","value","min","max","interpolate","interpolation","from","to","window","AudioContext","webkitAudioContext","prototype","createConstantSource","undefined","constantSourceNode","createScriptProcessor","pow","_isRunning","_audioContext","offset","__interpolationMode","Object","defineProperty","get","set","newValue","includes","_startValue","_targetValue","_startTime","_targetTime","_duration","minValue","maxValue","_clamp","_update","_interpolationMode","timeOffset","currentTime","linearInterpolation","_value","linearRampToValueAtTime","time","setValueAtTime","exponentialRampToValueAtTime","setTargetAtTime","timeConstant","setValueCurveAtTime","duration","onaudioprocess","event","inputChannel","inputBuffer","getChannelData","outputChannel","outputBuffer","sampleIndex","length","start","stop","createNoise","noiseNode","createBufferSource","seconds","buffer","createBuffer","sampleRate","bufferChannel","random","loop","ParameterDescriptors","name","defaultValue","numberOfConstrictions","index","constrictionParameterDescriptors","automationRate","push","Vector3","x","y","z","defineProperties","dot2","dot3","SimplexNoise","grad3","map","vector3Arguments","p","perm","Array","gradP","F2","sqrt","G2","F3","G3","seed","Date","now","floor","seedShift","simplex2","xin","yin","s","i","j","t","x0","y0","i1","j1","x1","y1","x2","y2","gi0","gi1","gi2","t0","n0","t1","n1","t2","n2","simplex1","Glottis","noise","coefficients","alpha","Delta","E0","epsilon","omega","shift","Te","startSeconds","parameterSamples","bufferLength","intensity","loudness","vibrato","vibratoGain","sin","PI","vibratoFrequency","vibratoWobble","wobble","frequency","tenseness","period","secondsOffset","_updateCoefficients","outputSample","noiseModulator","_getNoiseModulator","voice","_getNormalizedWaveform","R","d","a","k","g","T","e","exp","integral","RHS","total","lower","upper","log","angle","amplitude","positiveAmplitude","gain","Nose","tract","fade","left","Float64Array","junction","right","reflection","diameter","velum","target","Transient","position","startTime","timeAlive","lifetime","strength","exponent","Tract","blade","tip","lip","glottis","grid","rest","tongue","_diameter","_index","range","center","diameterValue","centerOffset","centerOffsetDiameter","centerOffsetRadius","diameterInterpolation","invertedDiameterInterpolation","straightenedInterpolation","nose","transients","obstruction","last","previousConstrictions","_updateReflection","tongueDiameter","tongueIndex","_processTransients","_processConstrictions","bufferInterpolation","updateAmplitudes","_processLips","_processNose","isNaN","reset","transient","update","isAlive","splice","constrictions","constriction","noiseScalar","thinness","openness","_ness","lowerIndex","lowerWeight","lowerNoise","upperIndex","upperWeight","upperNoise","leftInterpolation","rightInterpolation","noseInterpolation","sum","abs","_updateTract","_updateTransients","_updateConstrictions","curve","cos","maxIndex","constrictionIndex","A","B","_updateDiameterRest","newTractDiameter","tractIndexRange","round","constrictionIndexRadius","ceil","tractIndex","tractIndexOffset","tractDiameterScalar","tractDiameterDifference","fill","Processor","glottisSample","process","arguments","setupNode","audioNode","_constrictions","_enable","_enableConstriction","_disable","_disableConstriction","_isEnabled","newConstriction","find","removeConstriction","filter","_parameters","assignAudioParam","audioParam","paramName","Number","match","replace","toLowerCase","AudioWorklet","PinkTromboneNode","audioContext","parameters","forEach","port","onmessage","data","eventData","id","Promise","resolve","reject","resolveCallback","removeEventListener","addEventListener","postMessage","_postMessage","then","JSON","parse","processor","AudioWorkletNode","createPinkTromboneNode","pinkTromboneNode","channelMerger","createChannelMerger","channels","connect","parameterDescriptor","constantSource","_getParameterChannels","parameterChannels","channelIndex","numberOfChannels","_getParameterSamples","parameterNames","keys","parameterName","_getConstrictions","_constriction","playbackTime","getProcessor","PinkTrombone","audioWorklet","addModule","loadPromise","addModules","setupAudioGraph","_noise","_aspirateFilter","createBiquadFilter","type","Q","_fricativeFilter","_pinkTromboneNode","_gain","createGain","disconnect","createPinkTrombone","TractUI","_container","document","createElement","style","margin","padding","_canvases","_contexts","canvas","height","width","backgroundColor","zIndex","getContext","appendChild","_canvas","_context","_tract","origin","radius","scale","scalar","_processor","_touchConstrictionIndices","dispatchEvent","CustomEvent","bubbles","detail","_resize","_drawTract","mutationObserver","MutationObserver","mutationsList","observer","contains","observe","body","subtree","childList","_startEvent","_moveEvent","_endEvent","preventDefault","changedTouches","touch","touchIdentifier","offsetWidth","_resizeCanvases","offsetHeight","_isDrawing","clearRect","lineCap","lineJoin","_drawTongueControl","beginPath","lineWidth","strokeStyle","fillStyle","_moveTo","_lineTo","closePath","stroke","velumAngle","font","textAlign","globalAlpha","_drawText","_drawAmplitudes","_drawPositions","arcRadius","_getAngle","_getRadius","arc","_getX","_getY","indexOffset","_drawCircle","tongueAngle","tongueRadius","phoneme","approximants","phonemes","fricatives","stops","nasals","text","isStraight","save","translate","rotate","fillText","restore","__to","moveTo","_getWobble","lineTo","atan2","isTongue","pageX","offsetLeft","pageY","offsetTop","_getEventX","_getEventY","_getIndex","_getDiameter","parameterNameSuffix","Touch","identifier","_getEventPosition","isNearTongue","_isNearTongue","_setTongue","GlottisUI","_frequency","_isActive","_alwaysVoice","border","borderRadius","_slider","flex","top","_eventCallback","_touchIdentifier","some","customEvent","render","acos","vertical","horizontal","ButtonsUI","display","flexDirection","_buttons","_createButton","parentElement","removeChild","buttonName","isParameter","parameterPath","button","innerText","prefix","PinkTromboneUI","_tractUI","_glottisUI","_buttonsUI","gridTemplateRows","gridTemplateColumns","gridRowGap","node","gridColumn","gridRow","stopPropagation","children","child","PinkTromboneElement","_animationFrameObservers","customElements","whenDefined","resume","pinkTrombone","split","reduce","propertyName","indexValue","endTime","getAttribute","enableUI","loadEvent","Event","UI","show","hide","stopUI","requestAnimationFrame","highResTimeStamp","_requestAnimationFrameCallback","oldValue","disableUI","startUI","element","_highResTimeStamp","call","setAudioContext","HTMLElement","constructor","define"],"mappings":"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","file":"pink-trombone.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/*\n    TODO\n        define custom value setters\n*/\n\nMath.clamp = function(value, min, max) {\n    return value <= min?\n    min :\n    value < max?\n        value :\n        max;\n}\n\nMath.interpolate = function(interpolation, from, to) {\n    interpolation = Math.clamp(interpolation, 0, 1);\n    return (from * (1 - interpolation)) + (to * (interpolation));\n}\n\nwindow.AudioContext = window.AudioContext || window.webkitAudioContext;\n\nif(window.AudioContext.prototype.createConstantSource == undefined) {\n    window.AudioContext.prototype.createConstantSource = function() {\n        \n        const constantSourceNode = this.createScriptProcessor(Math.pow(2, 14), 1, 1);\n        constantSourceNode._isRunning = false;\n        constantSourceNode._audioContext = this;\n        constantSourceNode.offset = constantSourceNode;\n    \n        constantSourceNode.__interpolationMode = \"none\";\n        Object.defineProperty(constantSourceNode, \"_interpolationMode\", {\n            get : function() {\n                return this.__interpolationMode;\n            },\n            set : function(newValue) {\n                if([\"none\", \"linear\"].includes(newValue))\n                    this.__interpolationMode = newValue;\n            }\n        });\n\n        constantSourceNode._startValue;\n        constantSourceNode._targetValue;\n\n        constantSourceNode._startTime;\n        constantSourceNode._targetTime;\n        constantSourceNode._duration;\n\n        constantSourceNode.minValue = -3.402820018375656e+38;\n        constantSourceNode.maxValue = +3.402820018375656e+38;\n        constantSourceNode._clamp = function(newValue) {\n            return Math.clamp(newValue, this.minValue, this.maxValue);\n        }\n\n        constantSourceNode._update = function() {\n            if(this._interpolationMode !== \"none\") {\n                const timeOffset = (this._audioContext.currentTime - this._startTime);\n                \n                const linearInterpolation = timeOffset/this._duration;\n                var interpolation = linearInterpolation;\n\n                switch(this._interpolationMode) {\n                    case \"linear\":\n                        interpolation = linearInterpolation;\n                        break;\n                    default:\n                        break;\n                }\n\n                interpolation = Math.clamp(interpolation, 0, 1);\n\n                this._value = this._clamp(Math.interpolate(interpolation, this._startValue, this._targetValue));\n                \n                if(interpolation >= 1)\n                    this._interpolationMode = \"none\";\n            }\n        }\n\n        constantSourceNode._value = 1;\n        Object.defineProperty(constantSourceNode, \"value\", {\n            get : function() {\n                return this._value;\n            },\n            set : function(newValue) {\n                this._interpolationMode = \"none\";\n                this._value = Math.clamp(newValue, this.minValue, this.maxValue);\n            },\n        });\n\n        constantSourceNode.linearRampToValueAtTime = function(value, time) {\n            // FILL\n            this.value = value;\n            return this;\n        }\n        constantSourceNode.setValueAtTime = function(value, time) {\n            // FILL\n            this.value = value;\n            return this;\n        }\n        constantSourceNode.exponentialRampToValueAtTime = function(value, time) {\n            // FILL\n            this.value = value;\n            return this;\n        }\n        constantSourceNode.setTargetAtTime = function(value, time, timeConstant) {\n            // FILL\n            this.value = value;\n            return this;\n        }\n        constantSourceNode.setValueAtTime = function(value, time) {\n            // FILL\n            this.value = value;\n            return this;\n        }\n        constantSourceNode.setValueCurveAtTime = function(value, time, duration) {\n            // FILL\n            this.value = value;\n            return this;\n        }\n\n        constantSourceNode.onaudioprocess = function(event) {\n            const inputChannel = event.inputBuffer.getChannelData(0);\n            const outputChannel = event.outputBuffer.getChannelData(0);\n\n            if(this._isRunning)\n                for(let sampleIndex = 0; sampleIndex < outputChannel.length; sampleIndex++) {\n                    this._update();\n                    outputChannel[sampleIndex] = inputChannel[sampleIndex] + this.value;\n                }\n        }\n\n        constantSourceNode.start = function() {\n            this._isRunning = true;\n        }\n        constantSourceNode.stop = function() {\n            this._isRunning = false;\n        }\n\n        return constantSourceNode;\n    }\n}\n\nexport {};","/*\n    TODO\n        .type property that allows for different noise types (white noise, pink noise, etc)\n*/\n\nwindow.AudioContext = window.AudioContext || window.webkitAudioContext;\n\nwindow.AudioContext.prototype.createNoise = function() {\n    const noiseNode = this.createBufferSource();\n\n    const seconds = 1;\n\n    const buffer = this.createBuffer(1, seconds*this.sampleRate, this.sampleRate);\n    const bufferChannel = buffer.getChannelData(0);\n    for(let sampleIndex = 0; sampleIndex < bufferChannel.length; sampleIndex++)\n        bufferChannel[sampleIndex] = ((Math.random(0) *2) -1);\n\n    noiseNode.buffer = buffer;\n    noiseNode.loop = true;\n\n    noiseNode.start();\n    \n    return noiseNode;\n}\n\nexport {};","const ParameterDescriptors = [\n    {\n        name : \"noise\",\n        defaultValue : 0,\n        minValue : -1,\n        maxValue : 1,\n    },\n    {\n        name : \"frequency\",\n        defaultValue : 140,\n        minValue : 0,\n    },\n    {\n        name : \"tenseness\",\n        defaultValue : 0.6,\n        minValue : 0,\n        maxValue : 1,\n    },\n    {\n        name : \"intensity\",\n        defaultValue : 1,\n        minValue : 0,\n        maxValue : 1,\n    },\n    {\n        name : \"loudness\",\n        defaultValue : 1,\n        minValue : 0,\n        maxValue : 1,\n    },\n    \n    {\n        name : \"tongueIndex\",\n        defaultValue : 12.9,\n        //automationRate : \"k-rate\",\n    },\n    {\n        name : \"tongueDiameter\",\n        defaultValue : 2.43,\n        //automationRate : \"k-rate\",\n    },\n    \n    {\n        name : \"vibratoWobble\",\n        defaultValue : 1,\n        minValue : 0,\n        maxValue : 1,\n    },\n\n    {\n        name : \"vibratoFrequency\",\n        defaultValue : 6,\n        minValue : 0,\n    },\n    {\n        name : \"vibratoGain\",\n        defaultValue : 0.005,\n        minValue : 0,\n    },\n];\n\nParameterDescriptors.numberOfConstrictions = 4;\n\nfor(let index = 0; index < ParameterDescriptors.numberOfConstrictions; index++) {\n    const constrictionParameterDescriptors = [\n        {\n            name : \"constriction\" + index + \"index\",\n            defaultValue : 0,\n            automationRate : \"k-rate\",\n        },\n        {\n            name : \"constriction\" + index + \"diameter\",\n            defaultValue : 0,\n            automationRate : \"k-rate\",\n        },\n    ];\n\n    ParameterDescriptors.push(...constrictionParameterDescriptors);\n}\n\nexport default ParameterDescriptors;","// VECTOR 3\n\nfunction Vector3(x = 0, y = 0, z = 0) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n}\n\nObject.defineProperties(Vector3.prototype, {\n    dot2 : {\n        value : function(x, y) {\n            return (this.x*x) + (this.y*y);\n        }\n    },\n    dot3 : {\n        value : function(x, y, z) {\n            return this.dot2(x, y) + (this.z*z);\n        }\n    }\n});\n\n//////////////////////////////////////////////////////////////////////\n\n// SIMPLEX NOISE\n\nfunction SimplexNoise() {\n    this.grad3 = [\n        [+1, +1, +0],\n        [-1, +1, +0],\n        [+1, -1, +0],\n        [-1, -1, +0],\n        [+1, +0, +1],\n        [-1, +0, +1],\n        [+1, +0, -1],\n        [-1, +0, -1],\n        [+0, +1, +1],\n        [+0, -1, +1],\n        [+0, +1, -1],\n        [+0, -1, -1],\n    ].map(vector3Arguments => new Vector3(...vector3Arguments));\n\n    this.p = [151,160,137,91,90,15,\n        131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,\n        190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,\n        88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,\n        77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,\n        102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,\n        135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,\n        5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,\n        223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,\n        129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,\n        251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,\n        49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,\n        138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180];\n    \n    this.perm = new Array(Math.pow(2, 8+1));\n    this.gradP = new Array(Math.pow(2, 8+1));\n\n    this.F2 = (0.5 * (Math.sqrt(3) - 1));\n    this.G2 = ((3 - Math.sqrt(3))/6);\n\n    this.F3 = (1/3);\n    this.G3 = (1/6);\n\n    this.seed(Date.now());\n}\n\nObject.defineProperties(SimplexNoise.prototype, {\n    seed : {\n        value : function(seed) {\n            if((seed > 0) && (seed < 1))\n                seed *= Math.pow(2, 16);\n            \n            seed = Math.floor(seed);\n    \n            if(seed < Math.pow(2, 8))\n                seed |= seed << Math.pow(2, 3);\n            \n            for(let index = 0; index < Math.pow(2, 8); index++) {\n                const seedShift = (index & 1)?\n                    0 :\n                    Math.pow(2, 3);\n    \n                const value = this.p[index] ^ ((seed >> seedShift) & (Math.pow(2, 8)-1));\n                \n                this.perm[index] = this.perm[index + Math.pow(2, 8)] = value;\n                this.gradP[index] = this.gradP[index + Math.pow(2, 8)] = this.grad3[value % this.grad3.length];\n            }\n        }\n    },\n    simplex2 : {\n        value : function(xin, yin) {\n            const s = ((xin + yin) * this.F2);\n            \n            var i = Math.floor(xin + s);\n            var j = Math.floor(yin + s);\n            \n            const t = (i + j) * this.G2;\n            \n            const x0 = xin - i + t;\n            const y0 = yin - j + t;\n            \n            const i1 = (x0 > y0)? 1:0;\n            const j1 = 1 - i1;\n    \n            const x1 = x0 - i1 + this.G2;\n            const y1 = y0 - j1 + this.G2;\n    \n            const x2 = (x0 - 1) + (2 * this.G2);\n            const y2 = (y0 - 1) + (2 * this.G2);\n    \n            i &= (Math.pow(2, 8)-1);\n            j &= (Math.pow(2, 8)-1);\n    \n            const gi0 = this.gradP[i + this.perm[j]];\n            const gi1 = this.gradP[i + i1 + this.perm[j + j1]];\n            const gi2 = this.gradP[i + 1 + this.perm[j + 1]];\n    \n            const t0 = 0.5 - Math.pow(x0, 2) - Math.pow(y0, 2);\n            const n0 = (t0 < 0)?\n                0 :\n                Math.pow(t0, 4) * gi0.dot2(x0, y0);\n    \n            const t1 = 0.5 - Math.pow(x1, 2) - Math.pow(y1, 2);\n            const n1 = (t1 < 0)?\n                0 :\n                Math.pow(t1, 4) * gi1.dot2(x1, y1);\n    \n            const t2 = 0.5 - Math.pow(x2, 2) - Math.pow(y2, 2);\n            const n2 = (t2 < 0)?\n                0 :\n                Math.pow(t2, 4) * gi2.dot2(x2, y2);\n    \n            return 70 * (n0 + n1 + n2);\n        }\n    },\n    simplex1 : {\n        value : function(x) {\n            return this.simplex2((x * 1.2), -(x * 0.7));\n        }\n    }\n});\n\nexport default SimplexNoise;","/*\n    TODO\n        *\n*/\n\nMath.clamp = function(value, min, max) {\n    if(value <= min)\n        return min;\n    else if (value < max)\n        return value;\n    else\n        return max;\n}\n\nimport SimplexNoise from \"./SimplexNoise.js\";\n\nclass Glottis {\n    constructor() {\n        this.noise = new SimplexNoise();\n\n        this.coefficients = {\n            alpha : 0,\n            Delta : 0,\n            E0 : 0,\n            epsilon : 0,\n            omega : 0,\n            shift : 0,\n            Te : 0,\n        };\n\n        this.startSeconds = 0;\n    }\n\n    process(parameterSamples, sampleIndex, bufferLength, seconds) {\n\n        const intensity = parameterSamples.intensity;\n        const loudness = parameterSamples.loudness;\n\n        var vibrato = 0;\n        vibrato += parameterSamples.vibratoGain * Math.sin(2 * Math.PI * seconds * parameterSamples.vibratoFrequency);\n        vibrato += 0.02 * this.noise.simplex1(seconds * 4.07);\n        vibrato += 0.04 * this.noise.simplex1(seconds * 2.15);\n\n        if(parameterSamples.vibratoWobble > 0) {\n            var wobble = 0;\n                wobble += 0.2 * this.noise.simplex1(seconds * 0.98);\n                wobble += 0.4 * this.noise.simplex1(seconds * 0.50);\n            vibrato += wobble * parameterSamples.vibratoWobble;\n        }\n\n        var frequency = parameterSamples.frequency;\n        frequency *= (1 + vibrato);\n\n        var tenseness = parameterSamples.tenseness;\n        tenseness += 0.10 * this.noise.simplex1(seconds * 0.46);\n        tenseness += 0.05 * this.noise.simplex1(seconds * 0.36);\n        tenseness += (3 - tenseness) * (1 - intensity);\n\n\n        // waveform.update()\n        const period = (1/frequency);\n\n        var secondsOffset = (seconds - this.startSeconds);\n        var interpolation = secondsOffset/period;\n\n        if(interpolation >= 1) {\n            this.startSeconds = seconds + (secondsOffset % period);\n            interpolation = this.startSeconds/period;\n            this._updateCoefficients(tenseness);\n        }\n\n\n        // process\n        var outputSample = 0;\n        \n        var noiseModulator = this._getNoiseModulator(interpolation);\n            noiseModulator += ((1 -(tenseness*intensity)) *3);\n        parameterSamples.noiseModulator = noiseModulator;\n\n        var noise = parameterSamples.noise;\n            noise *= noiseModulator;\n            noise *= intensity;\n            noise *= intensity;\n            noise *= (1 - Math.sqrt(Math.max(tenseness, 0)));\n            noise *= (0.02*this.noise.simplex1(seconds*1.99)) + 0.2;\n\n        var voice = this._getNormalizedWaveform(interpolation);\n            voice *= intensity;\n            voice *= loudness;\n\n        outputSample = noise + voice;\n        outputSample *= intensity;\n\n        return outputSample;\n    }\n\n    update() {\n        \n    }\n\n    _updateCoefficients(tenseness = 0) {\n\n        const R = {};\n            R.d = Math.clamp(3*(1-tenseness), 0.5, 2.7);\n            R.a = -0.01 + 0.048*R.d;\n            R.k = 0.224 + 0.118*R.d;\n            R.g = (R.k/4)*(0.5+1.2*R.k)/(0.11*R.d-R.a*(0.5+1.2*R.k));\n\n        const T = {};\n            T.a = R.a;\n            T.p = 1/(2*R.g);\n            T.e = T.p + T.p*R.k;\n\n        this.coefficients.epsilon = 1/T.a;\n        this.coefficients.shift = Math.exp(-this.coefficients.epsilon * (1-T.e));\n        this.coefficients.Delta = 1 - this.coefficients.shift;\n\n        const integral = {};\n            integral.RHS = ((1/this.coefficients.epsilon) * (this.coefficients.shift-1) + (1-T.e) * this.coefficients.shift) / this.coefficients.Delta;\n            integral.total = {};\n                integral.total.lower = -(T.e - T.p)/2 + integral.RHS;\n                integral.total.upper = -integral.total.lower;\n        \n        this.coefficients.omega = Math.PI/T.p;\n        \n        const s = Math.sin(this.coefficients.omega * T.e);\n        const y = -Math.PI * s * integral.total.upper / (T.p*2);\n        const z = Math.log(y);\n\n        this.coefficients.alpha = z/(T.p/2 - T.e);\n        this.coefficients.E0 = -1 / (s*Math.exp(this.coefficients.alpha*T.e));\n        this.coefficients.Te = T.e;\n    }\n\n    _getNormalizedWaveform(interpolation) {\n        return (interpolation > this.coefficients.Te)?\n            (-Math.exp(-this.coefficients.epsilon * (interpolation-this.coefficients.Te)) + this.coefficients.shift)/this.coefficients.Delta :\n            this.coefficients.E0 * Math.exp(this.coefficients.alpha*interpolation) * Math.sin(this.coefficients.omega * interpolation);\n    }\n\n    _getNoiseModulator(interpolation) {\n        const angle = 2*Math.PI*interpolation;\n        const amplitude = Math.sin(angle);\n        const positiveAmplitude = Math.max(0, amplitude);\n        \n        const offset = 0.1\n        const gain = 0.2;\n\n        const noiseModulator = ((positiveAmplitude *gain) + offset);\n\n        return noiseModulator;\n    }\n}\n\nexport default Glottis;","/*\n    TODO\n        *\n*/\n\nclass Nose {\n    constructor(tract) {\n        this.length = Math.floor(28 * tract.length / 44);\n\n        this.start = tract.length - this.length + 1;\n\n        this.fade = 1;\n        this.offset = 0.8;\n\n        // buffers\n        this.left = new Float64Array(this.length);\n            this.left.junction = new Float64Array(this.length+1);\n\n        this.right = new Float64Array(this.length);\n            this.right.junction = new Float64Array(this.length+1);\n\n        this.reflection = new Float64Array(this.length+1);\n            this.reflection.value = 0;\n            this.reflection.new = 0;\n\n        this.diameter = new Float64Array(this.length);\n\n        this.amplitude = new Float64Array(this.length);\n            this.amplitude.max = new Float64Array(this.length);\n        \n        // setup\n        for(let index = 0; index < this.length; index++) {\n            const interpolation = index/this.length;\n\n            const value = (interpolation < 0.5)?\n                0.4 + 1.6 * (2 * interpolation) :\n                0.5 + 1.5 * (2 - (2 * interpolation));\n            \n            this.diameter[index] = Math.min(value, 1.9);\n        }\n\n        for(let index = 0; index < this.length; index++) {\n            this.amplitude[index] = Math.pow(this.diameter[index], 2);\n            \n            if(index > 0)\n                this.reflection[index] = (this.amplitude[index-1] - this.amplitude[index]) / (this.amplitude[index-1] + this.amplitude[index]);\n        }\n\n        this.diameter[0] = tract.velum.target;\n    }\n}\n\nexport default Nose;","class Transient {\n    constructor(position, seconds) {\n        this.position = position;\n\n        this.startTime = seconds;\n        this.timeAlive = 0;\n        this.lifetime = 0.2;\n\n        this.strength = 0.3;\n        this.exponent = 200;\n    }\n\n    get amplitude() {\n        return this.strength * Math.pow(-2, this.timeAlive * this.exponent);\n    }\n\n    get isAlive() {\n        return this.timeAlive < this.lifetime;\n    }\n\n    update(seconds) {\n        this.timeAlive = seconds - this.startTime;\n    }\n}\n\nexport default Transient;","/*\n    TODO\n        using tongue as a k-rate constriction\n*/\n\nimport Nose from \"./Nose.js\";\nimport Transient from \"./Transient.js\";\n\nMath.interpolate = function(interpolation, from, to) {\n    return (from * (1-interpolation)) + (to * (interpolation))\n}\nMath.clamp = function(value, minValue, maxValue) {\n    return (value <= minValue)?\n        minValue :\n        (value < maxValue)?\n            value :\n            maxValue;\n}\n\nclass Tract {\n    constructor(length = 44) {\n        this.length = length;\n\n        // Indices\n        this.blade = {\n            start : Math.floor(10 * this.length/44),\n        };\n        \n        this.tip = {\n            start : Math.floor(32 * this.length/44),\n        };\n\n        this.lip = {\n            start : Math.floor(39 * this.length/44),\n            reflection : -0.85,\n        };\n\n        this.glottis = {\n            reflection : 0.75\n        };\n\n        this.velum = {\n            target : 0.01,\n        };\n\n        this.grid = {\n            offset : 1.7,\n        };\n\n        // Buffers\n        this.right = new Float64Array(this.length);\n            this.right.junction = new Float64Array(this.length+1);\n            this.right.reflection = {\n                value : 0,\n                new : 0,\n            };\n\n        this.left = new Float64Array(this.length);\n            this.left.junction = new Float64Array(this.length+1);\n            this.left.reflection = {\n                value : 0,\n                new : 0,\n            };\n        \n        this.reflection = new Float64Array(this.length+1);\n            this.reflection.new = new Float64Array(this.length+1);\n\n        this.amplitude = new Float64Array(this.length);\n            this.amplitude.max = new Float64Array(this.length);\n        \n        this.diameter = new Float64Array(this.length);\n            this.diameter.rest = new Float64Array(this.length);\n\n        // Tongue & Nose\n        this.tongue = {\n            _diameter : 2.43,\n            _index : 12.9,\n\n            range : {\n                diameter : {\n                    minValue : 2.05,\n                    maxValue : 3.5,\n                    get range() {\n                        return this.maxValue - this.minValue;\n                    },\n                    get center() {\n                        return (this.maxValue + this.minValue)/2;\n                    },\n                    interpolation(diameterValue) {\n                        const interpolation = (diameterValue - this.minValue) / this.range;\n                        return Math.clamp(interpolation, 0, 1);\n                    }\n                },\n                index : {\n                    minValue : this.blade.start+2,\n                    maxValue : this.tip.start-3,\n                    get range() {\n                        return this.maxValue - this.minValue;\n                    },\n                    get center() {\n                        return (this.maxValue + this.minValue)/2;\n                    },\n                    centerOffset(interpolation) {\n                        const centerOffsetDiameter = interpolation * this.range;\n                        const centerOffsetRadius = centerOffsetDiameter/2;\n                        return centerOffsetRadius;\n                    },\n                },\n            },\n\n            get diameter() {\n                return this._diameter;\n            },\n            set diameter(newValue) {\n                this._diameter = Math.clamp(newValue, this.range.diameter.minValue, this.range.diameter.maxValue);\n            },\n\n            get index() {\n                return this._index;\n            },\n            set index(newValue) {\n                const diameterInterpolation = this.range.diameter.interpolation(this.diameter);\n                const invertedDiameterInterpolation = 1 - diameterInterpolation;\n\n                const straightenedInterpolation = Math.pow(invertedDiameterInterpolation, 0.58) - 0.2*(Math.pow(invertedDiameterInterpolation, 2) - invertedDiameterInterpolation);\n                const centerOffset = this.range.index.centerOffset(straightenedInterpolation);\n\n                this._index = true?\n                    Math.clamp(newValue, this.range.index.center -centerOffset, this.range.index.center +centerOffset) :\n                    Math.clamp(newValue, this.range.index.minValue, this.range.index.maxValue) ;\n            },\n        };\n\n        // NOSE\n        this.nose = new Nose(this);\n\n        // Transients\n        this.transients = [];\n            this.transients.obstruction = {\n                last : -1,\n                new : -1,\n            };\n        \n        // Constrictions\n        this.previousConstrictions = [];\n            this.previousConstrictions.tongue = {};\n\n        // diameter.update\n        for(let index = 0; index < this.length; index++) {\n            var value = 0;\n\n            if(index < (7 * this.length/44 - 0.5))\n                value = 0.6;\n            else if(index < (12 * this.length/44))\n                value = 1.1;\n            else\n                value = 1.5;\n\n            this.diameter[index] = value;\n            this.diameter.rest[index] = value;\n        }\n\n        this._updateReflection();\n\n    }\n\n    // PROCESS\n    process(parameterSamples, sampleIndex, bufferLength, seconds) {\n        this.tongue.diameter = parameterSamples.tongueDiameter;\n        this.tongue.index = parameterSamples.tongueIndex;\n\n        this._processTransients(seconds);\n        this._processConstrictions(this.previousConstrictions, parameterSamples);\n\n        const bufferInterpolation = (sampleIndex/bufferLength);\n        const updateAmplitudes = (Math.random() < 0.1);\n\n        var outputSample = 0;\n            outputSample += this._processLips(parameterSamples, bufferInterpolation, updateAmplitudes);\n            outputSample += this._processNose(parameterSamples, bufferInterpolation, updateAmplitudes);\n        \n        if(isNaN(outputSample))\n            this.reset();\n\n        return outputSample;\n    }\n\n    _processTransients(seconds) {\n        for(let index = this.transients.length-1; index >= 0; index--) {\n            const transient = this.transients[index];\n\n            this.left[transient.position] += transient.amplitude;\n            transient.update(seconds);\n\n            if(!transient.isAlive)\n                this.transients.splice(index, 1);\n        }\n    }\n    _processConstrictions(constrictions, parameterSamples) {\n        for(let index = 0; index < constrictions.length; index++) {\n            const constriction = constrictions[index];\n            \n            if(constriction.index >= 2 && constriction.index <= this.length && constriction.diameter > 0) {\n                var noise = parameterSamples.glottis;\n\n                const noiseScalar = parameterSamples.noiseModulator * 0.66;\n                    noise *= noiseScalar;\n\n                const thinness = Math.clamp(8 * (0.7 - constriction.diameter), 0, 1);\n                const openness = Math.clamp(30 * (constriction.diameter - 0.3), 0, 1);\n                    const _ness = thinness*openness;\n                        noise *= _ness/2;\n\n                const lowerIndex = Math.floor(constriction.index);\n                    const lowerWeight = constriction.index - lowerIndex;\n                        const lowerNoise = noise * lowerWeight;\n\n                const upperIndex = lowerIndex+1;\n                    const upperWeight = upperIndex - constriction.index;\n                        const upperNoise = noise * upperWeight;\n                    \n                this.right[lowerIndex+1] += lowerNoise;\n                this.right[upperIndex+1] += upperNoise;\n\n                this.left[lowerIndex+1] += lowerNoise;\n                this.left[upperIndex+1] += upperNoise;\n            }\n        }\n    }\n\n    _processLips(parameterSamples, bufferInterpolation, updateAmplitudes) {\n        this.right.junction[0] = this.left[0] * this.glottis.reflection + parameterSamples.glottis;\n        this.left.junction[this.length] = this.right[this.length-1] * this.lip.reflection;\n        \n        for(let index = 1; index < this.length; index++) {\n            const interpolation = Math.interpolate(bufferInterpolation, this.reflection[index], this.reflection.new[index]);\n            const offset = interpolation * (this.right[index-1] + this.left[index]);\n\n            this.right.junction[index] = this.right[index-1] - offset;\n            this.left.junction[index] = this.left[index] + offset;\n        }\n\n        const leftInterpolation = Math.interpolate(bufferInterpolation, this.left.reflection.new, this.left.reflection.value);\n            this.left.junction[ this.nose.start] = leftInterpolation  * this.right[this.nose.start-1] + (leftInterpolation +1) * (this.nose.left[0] + this.left[ this.nose.start  ]);\n        const rightInterpolation = Math.interpolate(bufferInterpolation, this.right.reflection.new, this.right.reflection.value);\n            this.right.junction[this.nose.start] = rightInterpolation * this.left[ this.nose.start  ] + (rightInterpolation+1) * (this.nose.left[0] + this.right[this.nose.start-1]);\n        const noseInterpolation = Math.interpolate(bufferInterpolation, this.nose.reflection.new, this.nose.reflection.value);\n            this.nose.right.junction[0] = noseInterpolation * this.nose.left[0] + (noseInterpolation + 1) * (this.left[this.nose.start] + this.right[this.nose.start-1]);\n\n        for(let index = 0; index < this.length; index++) {\n            this.right[index] = this.right.junction[index] * 0.999;\n            this.left[index] = this.left.junction[index+1] * 0.999;\n\n            if(updateAmplitudes) {\n                const sum = Math.abs(this.left[index] + this.right[index]);\n\n                this.amplitude.max[index] = (sum > this.amplitude.max[index])?\n                    sum :\n                    this.amplitude.max[index] * 0.999;\n            }\n        }\n\n        return this.right[this.length-1];;\n    }\n    _processNose(parameterSamples, bufferInterpolation, updateAmplitudes) {\n        this.nose.left.junction[this.nose.length] = this.nose.right[this.nose.length-1] * this.lip.reflection;\n\n        for(let index = 1; index < this.nose.length; index++) {\n            const offset = this.nose.reflection[index] * (this.nose.left[index] + this.nose.right[index-1]);\n\n            this.nose.left.junction[index] = this.nose.left[index] + offset;\n            this.nose.right.junction[index] = this.nose.right[index-1] - offset;\n        }\n\n        for(let index = 0; index < this.nose.length; index++) {\n            this.nose.left[index] = this.nose.left.junction[index+1] * this.nose.fade;\n            this.nose.right[index] = this.nose.right.junction[index] * this.nose.fade;\n\n            if(updateAmplitudes) {\n                const sum = Math.abs(this.nose.left[index] + this.nose.right[index]);\n                this.nose.amplitude.max[index] = (sum > this.nose.amplitude.max[index])?\n                    sum :\n                    this.nose.amplitude.max[index] * 0.999;\n            }\n        }\n\n        return this.nose.right[this.nose.length-1];\n    }\n\n    // UPDATE\n    update(seconds, constrictions) {\n        this._updateTract();\n\n        this._updateTransients(seconds);\n\n        this.nose.diameter[0] = this.velum.target;\n        this.nose.amplitude[0] = Math.pow(this.nose.diameter[0], 2);\n\n        this._updateReflection();\n\n        this._updateConstrictions(constrictions);\n    }\n\n    _updateDiameterRest() {\n        for(let index = this.blade.start; index < this.lip.start; index++) {\n            const interpolation = (this.tongue.index - index)/(this.tip.start - this.blade.start);\n\n            const angle = 1.1 * Math.PI * interpolation;\n            const diameter = 2 + (this.tongue.diameter - 2) /1.5;\n\n            var curve = (1.5 - diameter + this.grid.offset) * Math.cos(angle);\n\n            if(index == (this.blade.start - 2) || index == (this.lip.start - 1))\n                curve *= 0.80;\n            \n            if(index == (this.blade.start + 0) || index == (this.lip.start - 2))\n                curve *= 0.94;\n            \n            const value = 1.5 - curve;\n            \n            this.diameter.rest[index] = value;\n        }\n    }\n\n    _updateConstrictions(constrictions) {\n        var update = false;\n\n        update = update || (this.tongue.index !== this.previousConstrictions.tongue.index) || (this.tongue.diameter !== this.previousConstrictions.tongue.diameter);\n\n        const maxIndex = Math.max(this.previousConstrictions.length, constrictions.length);\n        for(let constrictionIndex = 0, A = constrictions[0], B = this.previousConstrictions[0]; !update && constrictionIndex < maxIndex; constrictionIndex++, A = constrictions[constrictionIndex], B = this.previousConstrictions[constrictionIndex]) {\n            update = (A !== undefined && B !== undefined)?\n                (A.index !== B.index) || (A.diameter !== B.diameter) :\n                !(A == undefined && B == undefined);\n        }\n\n        if(update) {\n            this._updateDiameterRest();\n            for(let index = 0; index < this.length; index++) {\n                this.diameter[index] = this.diameter.rest[index];\n            }\n\n            this.velum.target = 0.01;\n            \n            for(let index = -1; index < constrictions.length; index++) {\n                const constriction = constrictions[index] || this.tongue;\n\n                if(constriction.index > this.nose.start && constriction.diameter < -this.nose.offset)\n                    this.velum.target = 0.4;\n\n                if(constriction.index >= 2 && constriction.index < this.length && constriction.diameter > -(0.85 + this.nose.offset)) {\n                    var newTractDiameter = constriction.diameter;\n                    newTractDiameter -= 0.3;\n                    newTractDiameter = Math.max(0, newTractDiameter);\n\n                    if(newTractDiameter < 3) {\n                        var tractIndexRange = 2;\n\n                        if(constriction.index < 25)\n                            tractIndexRange = 10;\n                        else if(constriction.index >= this.tip.start)\n                            tractIndexRange = 5;\n                        else\n                            tractIndexRange = 10 - 5 * (constriction.index-25) / (this.tip.start - 25);\n                        \n                        const constrictionIndex = Math.round(constriction.index);\n                        const constrictionIndexRadius = Math.ceil(tractIndexRange)+1;\n\n                        for(let tractIndex = constrictionIndex - constrictionIndexRadius; (tractIndex < constrictionIndex + tractIndexRange+1) && (tractIndex >= 0 && tractIndex < this.length); tractIndex++) {\n                            const tractIndexOffset = Math.abs(tractIndex - constriction.index) - 0.5; // relpos\n\n                            var tractDiameterScalar; // shrink\n                            if(tractIndexOffset <= 0)\n                                tractDiameterScalar = 0;\n                            else if(tractIndexOffset > tractIndexRange)\n                                tractDiameterScalar = 1;\n                            else\n                                tractDiameterScalar = 0.5 * (1 - Math.cos(Math.PI * tractIndexOffset/tractIndexRange));\n                            \n                            const tractDiameterDifference = this.diameter[tractIndex] - newTractDiameter;\n                            if(tractDiameterDifference > 0) {\n                                this.diameter[tractIndex] = newTractDiameter + tractDiameterDifference * tractDiameterScalar;\n                            }\n                        }\n                    }\n                }\n            }\n\n            this.previousConstrictions = constrictions;\n            this.previousConstrictions.tongue = {\n                index : this.tongue.index,\n                diameter : this.tongue.diameter,\n            };\n        }\n    }\n\n    _updateTract() {\n        for(let index = 0; index < this.length; index++) {\n            if(this.diameter[index] <= 0) {\n                this.transients.obstruction.new = index;\n            }\n        }\n    }\n\n    _updateTransients(seconds) {\n        if(this.nose.amplitude[0] < 0.05) {\n            if((this.transients.obstruction.last > -1) && (this.transients.obstruction.new == -1))\n                this.transients.push(new Transient(this.transients.obstruction.new, seconds));\n\n            this.transients.obstruction.last = this.transients.obstruction.new;\n        }\n    }\n\n    _updateReflection() {\n        for(let index = 0; index < this.length; index++) {\n            this.amplitude[index] = Math.pow(this.diameter[index], 2);\n\n            if(index > 0) {\n                this.reflection[index] = this.reflection.new[index];\n                this.reflection.new[index] = (this.amplitude[index] == 0)?\n                    0.999 :\n                    (this.amplitude[index-1] - this.amplitude[index]) / (this.amplitude[index-1] + this.amplitude[index]);\n            }\n            \n        }\n\n        const sum = this.amplitude[this.nose.start] + this.amplitude[this.nose.start+1] + this.nose.amplitude[0];\n            this.left.reflection.value = this.left.reflection.new;\n            this.left.reflection.new = (2 * this.amplitude[this.nose.start] - sum) / sum;\n\n            this.right.reflection.value = this.right.reflection.new;\n            this.right.reflection.new = (2 * this.amplitude[this.nose.start + 1] - sum) / sum;\n\n            this.nose.reflection.value = this.nose.reflection.new;\n            this.nose.reflection.new = (2 * this.nose.amplitude[0] - sum) / sum;\n    }\n\n    reset() {\n        this.right.fill(0);\n            this.right.junction.fill(0);\n        this.left.fill(0);\n            this.left.junction.fill(0);\n        \n        this.nose.left.fill(0);\n            this.nose.left.junction.fill(0);\n        this.nose.right.fill(0);\n            this.nose.right.junction.fill(0);\n    }\n}\n\nexport default Tract;","/*\n    TODO            \n        add \"precision\" property to iterate this.tract.process\n*/\n\nimport Glottis from \"./Glottis.js\";\nimport Tract from \"./Tract.js\";\n\nclass Processor {\n    constructor() {\n        this.glottis = new Glottis();\n        this.tract = new Tract();\n    }\n\n    process(parameterSamples, sampleIndex, bufferLength, seconds) {\n        var outputSample = 0;\n        \n        const glottisSample = this.glottis.process(...arguments);\n        parameterSamples.glottis = glottisSample;\n\n        outputSample += this.tract.process(...arguments);\n            sampleIndex += 0.5; // process twice - note the \"...arguments\" doesn't read this\n        outputSample += this.tract.process(parameterSamples, sampleIndex, bufferLength, seconds);\n\n        outputSample *= 0.125;\n\n        return outputSample;\n    }\n\n    update(seconds, constrictions) {\n        this.glottis.update();\n        this.tract.update(seconds, constrictions);\n    }\n}\n\nexport default Processor;","/*\n    TODO\n        *\n*/\n\nimport ParameterDescriptors from \"./processors/ParameterDescriptors.js\";\nimport Processor from \"./processors/Processor.js\";\n\nwindow.AudioContext = window.AudioContext || window.webkitAudioContext;\n\n// CONSTRUCTOR HELPERS\nfunction setupNode(audioNode) {\n    audioNode._constrictions = [];\n    for(let constrictionIndex = 0; constrictionIndex < ParameterDescriptors.numberOfConstrictions; constrictionIndex++) {\n        audioNode._constrictions[constrictionIndex] = {\n            _index : constrictionIndex,\n\n            index : null,\n            diameter : null,\n\n            _enable : () => audioNode._enableConstriction(constrictionIndex),\n            _disable : () => audioNode._disableConstriction(constrictionIndex),\n\n            _isEnabled : false,\n        };\n    }\n\n    audioNode.newConstriction = function(index, diameter) {\n        return this._constrictions.find(constriction => {\n            if(!constriction._isEnabled) {\n                if(index !== undefined)\n                    constriction.index.value = index;\n\n                if(diameter !== undefined)\n                    constriction.diameter.value = diameter;\n\n                constriction._enable();\n                return true;\n            }\n        });\n    }\n\n    audioNode.removeConstriction = function(constriction) {\n        constriction._disable();\n    }\n\n    Object.defineProperty(audioNode, \"constrictions\", {\n        get : function() {\n            return this._constrictions.filter(constriction => constriction._isEnabled)\n        }\n    });\n\n    audioNode._parameters = {};\n\n    audioNode.tongue = audioNode._parameters.tongue = {\n        index : null,\n        diameter : null,\n    };\n    audioNode.vibrato = audioNode._parameters.vibrato = {\n        frequency : null,\n        gain : null,\n        wobble : null,\n    };\n}\nfunction assignAudioParam(audioNode, audioParam, paramName) {\n    if(paramName.includes(\"constriction\")) {\n        const constrictionIndex = Number(paramName.match(/[0-9]+/g)[0]);\n        const constriction = audioNode._constrictions[constrictionIndex];\n\n        constriction[paramName.includes(\"index\")? \"index\":\"diameter\"] = audioParam;\n        \n        audioNode.constrictions[constrictionIndex] = constriction;\n    }\n    else if(paramName.includes(\"vibrato\")) {\n        audioNode.vibrato[paramName.replace(\"vibrato\", '').toLowerCase()] = audioParam;\n    }\n    else if(paramName.includes(\"tongue\")) {\n        audioNode.tongue[paramName.replace(\"tongue\", '').toLowerCase()] = audioParam;\n    }\n    else {\n        audioNode[paramName] = audioNode._parameters[paramName] = audioParam;    \n    }\n}\n\nif(window.AudioWorklet !== undefined) {\n    class PinkTromboneNode extends AudioWorkletNode {\n        constructor(audioContext) {\n            super(audioContext, \"pink-trombone-worklet-processor\");\n\n            setupNode(this);\n\n            this.parameters.forEach((audioParam, paramName) => {\n                assignAudioParam(this, audioParam, paramName);\n            });\n\n            this.port.onmessage = (event) => {\n                switch(event.data.name) {\n                    default:\n                        break;\n                }\n            }\n        }\n\n        _postMessage(eventData) {\n            eventData.id = Math.random();\n\n            return new Promise((resolve, reject) => {\n                const resolveCallback = (event) => {\n                    if(eventData.id == Number(event.data.id)) {\n                        this.port.removeEventListener(\"message\", resolveCallback);\n                        resolve(event);\n                    }\n                }\n\n                this.port.addEventListener(\"message\", resolveCallback);\n                this.port.postMessage(eventData);\n            });\n        }\n\n        _enableConstriction(constrictionIndex) {\n            return this._postMessage({\n                name : \"enableConstriction\",\n                constrictionIndex : constrictionIndex,\n            }).then(() => {\n                this._constrictions[constrictionIndex]._isEnabled = true;\n            });\n        }\n\n        _disableConstriction(constrictionIndex) {\n            return this._postMessage({\n                name : \"disableConstriction\",\n                constrictionIndex : constrictionIndex,\n            }).then(() => {\n                this._constrictions[constrictionIndex]._isEnabled = false; \n            });\n        }\n\n        getProcessor() {\n            return this._postMessage({\n                name : \"getProcessor\",\n            }).then(event => {\n                return JSON.parse(event.data.processor);\n            });\n        }\n    }\n\n    window.AudioContext.prototype.createPinkTromboneNode = function() {\n        return new PinkTromboneNode(this, ...arguments);\n    }\n}\nelse {\n    window.AudioContext.prototype.createPinkTromboneNode = function() {\n        const pinkTromboneNode = this.createScriptProcessor(Math.pow(2, 11), ParameterDescriptors.length, 1);\n        pinkTromboneNode.processor = new Processor();\n\n        setupNode(pinkTromboneNode);\n\n        pinkTromboneNode.channelMerger = this.createChannelMerger(ParameterDescriptors.length);\n            pinkTromboneNode.channelMerger.channels = [];\n        pinkTromboneNode.channelMerger.connect(pinkTromboneNode);\n\n        ParameterDescriptors.forEach((parameterDescriptor, index) => {\n            const constantSource = this.createConstantSource();\n            constantSource.start();\n\n            const audioParam = constantSource.offset;\n                audioParam.automationRate = parameterDescriptor.automationRate || \"a-rate\";\n                audioParam.value = parameterDescriptor.defaultValue || 0;\n            constantSource.connect(pinkTromboneNode.channelMerger, 0, index);\n\n            pinkTromboneNode.channelMerger.channels[index] = parameterDescriptor.name;\n\n            assignAudioParam(pinkTromboneNode, audioParam, parameterDescriptor.name);\n        });\n\n\n        pinkTromboneNode._getParameterChannels = function(inputBuffer) {\n            const parameterChannels = {};\n\n            for(let channelIndex = 0; channelIndex < inputBuffer.numberOfChannels; channelIndex++) {\n                parameterChannels[this.channelMerger.channels[channelIndex]] = inputBuffer.getChannelData(channelIndex);\n            }\n            \n            return parameterChannels;\n        }\n\n        pinkTromboneNode._getParameterSamples = function(parameterChannels, sampleIndex) {\n            const parameterSamples = {};\n            const parameterNames = Object.keys(parameterChannels);\n\n            for(let channelIndex = 0; channelIndex < parameterNames.length; channelIndex++) {\n                const parameterName = parameterNames[channelIndex];\n                \n                if(!parameterName.includes(\"constriction\"))\n                    parameterSamples[parameterName] = parameterChannels[parameterName][sampleIndex];\n            }\n\n            return parameterSamples;\n        }\n\n        pinkTromboneNode._getConstrictions = function(parameterChannels) {\n            const constrictions = [];\n\n            for(let constrictionIndex = 0; constrictionIndex < this._constrictions.length; constrictionIndex++) {\n                const _constriction = this._constrictions[constrictionIndex];\n\n                if(_constriction._isEnabled) {\n                    const constriction = {\n                        index : parameterChannels[\"constriction\" + constrictionIndex + \"index\"][0],\n                        diameter : parameterChannels[\"constriction\" + constrictionIndex + \"diameter\"][0],\n                    };\n\n                    constrictions[constrictionIndex] = constriction;    \n                }\n            }\n\n            return constrictions;\n        }\n        \n        pinkTromboneNode.onaudioprocess = function(event) {\n            const outputChannel = event.outputBuffer.getChannelData(0);\n\n            const parameterChannels = this._getParameterChannels(event.inputBuffer);\n            const constrictions = this._getConstrictions(parameterChannels);\n\n            for(let sampleIndex = 0; sampleIndex < outputChannel.length; sampleIndex++) {\n                const parameterSamples = this._getParameterSamples(parameterChannels, sampleIndex);\n                const bufferLength = outputChannel.length;\n                const seconds = event.playbackTime + (sampleIndex/event.inputBuffer.sampleRate);\n\n                outputChannel[sampleIndex] = this.processor.process(parameterSamples, sampleIndex, bufferLength, seconds, constrictions);\n            }\n\n            this.processor.update(event.playbackTime + (outputChannel.length/event.inputBuffer.sampleRate), constrictions);\n        }\n\n        pinkTromboneNode._enableConstriction = function(constrictionIndex) {\n            this._constrictions[constrictionIndex]._isEnabled = true;\n        }\n        pinkTromboneNode._disableConstriction = function(constrictionIndex) {\n            this._constrictions[constrictionIndex]._isEnabled = false;\n        }\n\n        pinkTromboneNode.getProcessor = function() {\n            return new Promise((resolve, reject) => {\n                resolve(this.processor);\n            });\n        }\n\n        return pinkTromboneNode;\n    }\n}\n\nexport {};","/*\n    TODO\n        start/stop for the pinkTromboneNode\n*/\n\nimport {} from \"./audio/nodes/constantSource/AudioNode.js\"\nimport {} from \"./audio/nodes/noise/AudioNode.js\";\nimport {} from \"./audio/nodes/pinkTrombone/AudioNode.js\";\n\nwindow.AudioContext = window.AudioContext || window.webkitAudioContext;\n\nclass PinkTrombone {\n    addModules(audioContext) {\n        if(audioContext.audioWorklet !== undefined) {\n            //return audioContext.audioWorklet.addModule(\"./script/audio/nodes/pinkTrombone/processors/WorkletProcessor.js\")\n            return audioContext.audioWorklet.addModule(\"./pink-trombone-worklet-processor.min.js\");\n        }\n        else {\n            return new Promise((resolve, reject) => {\n                resolve();\n            });\n        }\n    }\n\n    constructor(audioContext) {\n        this.loadPromise = \n            this.addModules(audioContext)\n                .then(() => {\n                    this.audioContext = audioContext;\n                    this.setupAudioGraph();\n                    return this.audioContext;\n                });\n    }\n\n    setupAudioGraph() {\n        this._noise = this.audioContext.createNoise();\n\n        this._aspirateFilter = this.audioContext.createBiquadFilter();\n                this._aspirateFilter.type = \"bandpass\";\n                this._aspirateFilter.frequency.value = 500;\n                this._aspirateFilter.Q.value = 0.5;\n            \n        this._fricativeFilter = this.audioContext.createBiquadFilter();\n            this._fricativeFilter.type = \"bandpass\";\n            this._fricativeFilter.frequency.value = 1000;\n            this._fricativeFilter.Q.value = 0.5;\n\n        this._pinkTromboneNode = this.audioContext.createPinkTromboneNode();\n\n        this._noise.connect(this._aspirateFilter);\n            this._aspirateFilter.connect(this._pinkTromboneNode.noise);\n\n        this._noise.connect(this._fricativeFilter);\n            this._fricativeFilter.connect(this._pinkTromboneNode.noise);\n\n        this._gain = this.audioContext.createGain();\n            this._gain.gain.value = 0;\n            this._pinkTromboneNode.connect(this._gain);\n    }\n\n    get parameters() {\n        return this._pinkTromboneNode._parameters;\n    }\n\n    connect() {\n        return this._gain.connect(...arguments);\n    }\n    disconnect() {\n        return this._gain.disconnect(...arguments);\n    }\n\n    start() {\n        this._gain.gain.value = 1;\n    }\n    stop() {\n        this._gain.gain.value = 0;\n    }\n\n    get constrictions() {\n        return this._pinkTromboneNode.constrictions;\n    }\n    newConstriction() {\n        return this._pinkTromboneNode.newConstriction(...arguments);\n    }\n    removeConstriction(constriction) {\n        this._pinkTromboneNode.removeConstriction(constriction);\n    }\n\n    getProcessor() {\n        return this._pinkTromboneNode.getProcessor();\n    }\n}\n\nwindow.AudioContext.prototype.createPinkTrombone = function() {\n    return new PinkTrombone(this);\n}\n\nexport default PinkTrombone;","/*\n    TODO\n        throttle value setter\n        draw background stuff\n*/\n\nclass TractUI {\n    constructor() {\n        this._container = document.createElement(\"div\");\n        this._container.style.margin = 0;\n        this._container.style.padding = 0;\n\n        this._canvases = {};\n        this._contexts = {};\n\n        [\"tract\", \"background\"].forEach((id, index) => {\n            const canvas = document.createElement(\"canvas\");\n            canvas.id = id;\n\n            canvas.style.position = \"absolute\";\n            canvas.height = 500;\n            canvas.width = 600;\n            canvas.style.backgroundColor = \"transparent\";\n            canvas.style.margin = 0;\n            canvas.style.padding = 0;\n            canvas.style.zIndex = 1-index;\n\n            this._canvases[id] = canvas;\n            this._contexts[id] = canvas.getContext(\"2d\");\n\n            this._container.appendChild(canvas);\n        });\n        \n        this._canvas = this._canvases.tract;\n        this._context = this._contexts.tract;\n        \n        this._tract = {\n            origin : {\n                x : 340,\n                y : 460,\n            },\n\n            radius : 298,\n            scale : 60,\n\n            scalar : 1,\n\n            angle : {\n                scale : 0.64,\n                offset : -0.25,\n            },\n        };\n        this._processor = null;\n        this._parameters = {};\n\n        this._touchConstrictionIndices = [];\n\n        // AnimationFrame\n        this._container.addEventListener(\"animationFrame\", event => {            \n            this._container.dispatchEvent(new CustomEvent(\"getProcessor\", {\n                bubbles : true,\n            }));\n\n            this._container.dispatchEvent(new CustomEvent(\"getParameter\", {\n                bubbles : true,\n                detail : {\n                    parameterName : \"intensity\",\n                },\n            }));\n        });\n\n        this._container.addEventListener(\"didGetProcessor\", event => {\n            this._processor = event.detail.processor;\n            this._resize();\n            this._drawTract();\n        });\n        this._container.addEventListener(\"didGetParameter\", event => {\n            const parameterName = event.detail.parameterName;\n            const value = event.detail.value;\n\n            this._parameters[parameterName] = value;\n        });\n\n        // RequestAnimationFrame after being attached to the DOM\n        const mutationObserver = new MutationObserver((mutationsList, observer) => {\n            if(document.contains(this._container)) {\n                this._container.dispatchEvent(new CustomEvent(\"requestAnimationFrame\", {\n                    bubbles : true,\n                }));\n\n                observer.disconnect();\n            }\n        });\n        mutationObserver.observe(document.body, {\n            subtree : true,\n            childList : true,\n        });\n\n        // Mouse EventListeners\n        this._canvases.tract.addEventListener(\"mousedown\", event => {\n            this._startEvent(event);\n        });\n        this._canvases.tract.addEventListener(\"mousemove\", event => {\n            this._moveEvent(event);\n        });\n        this._canvases.tract.addEventListener(\"mouseup\", event => {\n            this._endEvent(event);\n        });\n\n        // Touch EventListeners\n        this._canvases.tract.addEventListener(\"touchstart\", event => {\n            event.preventDefault();\n            Array.from(event.changedTouches).forEach(touch => this._startEvent(touch));\n        });\n        this._canvases.tract.addEventListener(\"touchmove\", event => {\n            event.preventDefault();\n            Array.from(event.changedTouches).forEach(touch => this._moveEvent(touch));\n        });\n        this._canvases.tract.addEventListener(\"touchend\", event => {\n            event.preventDefault();\n            Array.from(event.changedTouches).forEach(touch => this._endEvent(touch));\n        });\n        this._canvases.tract.addEventListener(\"touchcancel\", event => {\n            event.preventDefault();\n            Array.from(event.changedTouches).forEach(touch => this._endEvent(touch));\n        })\n\n        // Constriction EventLiteners\n        this._canvases.tract.addEventListener(\"didNewConstriction\", event => {\n            this._touchConstrictionIndices[event.detail.touchIdentifier] = event.detail.constrictionIndex;\n        });\n        this._canvases.tract.addEventListener(\"didRemoveConstriction\", event => {\n            this._touchConstrictionIndices[event.detail.touchIdentifier] = undefined;\n        });\n    }\n\n    get node() {\n        return this._container;\n    }\n\n    get width() {\n        return this._container.offsetWidth;\n    }\n    get height() {\n        return this._container.offsetHeight;\n    }\n\n    _resize() {\n        this._tract.scalar = this._canvases.tract.width / this._canvases.tract.offsetWidth;\n        this._resizeCanvases();\n    }\n\n    _resizeCanvases() {\n        for(let id in this._canvases) {\n            //this._canvases[id].style.width = this._container.offsetWidth;\n            this._canvases[id].style.height = this._container.offsetHeight;\n        }\n    }\n\n    _drawTract() {\n        if(this._isDrawing) return;\n\n        this._isDrawing = true;\n\n        this._context = this._contexts.tract;\n\n        this._context.clearRect(0, 0, this._canvas.width, this._canvas.height);\n        this._context.lineCap = this._context.lineJoin = \"round\";\n\n        this._drawTongueControl();\n\n        this._context.beginPath();\n        this._context.lineWidth = 2;\n        this._context.strokeStyle = this._context.fillStyle = \"pink\";\n        this._moveTo(1, 0);\n\n        for(let index = 1; index < this._processor.tract.length; index++)\n            this._lineTo(index, this._processor.tract.diameter[index]);\n        \n        for(let index = this._processor.tract.length-1; index >= 2; index--)\n            this._lineTo(index, 0);\n        \n        this._context.closePath();\n        this._context.stroke();\n        this._context.fill();\n\n        // NOSE\n        const velum = this._processor.tract.nose.diameter[0];\n        const velumAngle = velum * 4;\n\n        this._context.beginPath();\n        this._context.lineWidth = 2;\n        this._context.strokeStyle = this._context.fillStyle = \"pink\";\n        this._moveTo(this._processor.tract.nose.start, -this._processor.tract.nose.offset);\n        \n        for(let index = 1; index < this._processor.tract.nose.length; index++)\n            this._lineTo(index + this._processor.tract.nose.start, -this._processor.tract.nose.offset - this._processor.tract.nose.diameter[index] * 0.9);\n        \n        for(let index = this._processor.tract.nose.length - 1; index >= 1; index--)\n            this._lineTo(index + this._processor.tract.nose.start, -this._processor.tract.nose.offset);\n        \n        this._context.closePath();\n        this._context.fill();\n\n        this._context.beginPath();\n        this._context.lineWidth = 2;\n        this._context.strokeStyle = this._context.fillStyle = \"pink\";\n        this._moveTo(this._processor.tract.nose.start - 2, 0);\n        this._lineTo(this._processor.tract.nose.start, -this._processor.tract.nose.offset);\n        this._lineTo(this._processor.tract.nose.start + velumAngle, -this._processor.tract.nose.offset);\n        this._lineTo(this._processor.tract.nose.start + velumAngle - 2, 0);\n        this._context.closePath();\n        this._context.stroke();\n        this._context.fill();\n\n        this._context.fillStyle = \"white\";\n        this._context.font = \"20px Arial\";\n        this._context.textAlign = \"center\";\n        this._context.globalAlpha = 1;\n\n        this._drawText(this._processor.tract.length * 0.10,  0.425, \"throat\", false);\n        this._drawText(this._processor.tract.length * 0.71, -1.800, \"nasal\" , false);\n        this._drawText(this._processor.tract.length * 0.71, -1.300, \"cavity\", false);\n        \n        this._context.font = \"22px Arial\";\n        this._drawText(this._processor.tract.length * 0.6, 0.9, \"oral\" , false);\n        this._drawText(this._processor.tract.length * 0.7, 0.9, \"cavity\" , false);\n\n        this._drawAmplitudes();\n\n        this._context.beginPath();\n        this._context.lineWidth = 5;\n        this._context.strokeStyle = \"#C070C6\";\n        this._context.lineJoin = this._context.lineCap = \"round\";\n        this._moveTo(1, this._processor.tract.diameter[0]);\n        for(let index = 2; index < this._processor.tract.length; index++)\n            this._lineTo(index, this._processor.tract.diameter[index]);\n        \n        this._moveTo(1, 0);\n        for(let index = 2; index <= this._processor.tract.nose.start - 2; index++)\n            this._lineTo(index, 0);\n        \n        this._moveTo(this._processor.tract.nose.start + velumAngle - 2, 0);\n        for(let index = this._processor.tract.nose.start + Math.ceil(velumAngle) - 2; index < this._processor.tract.length; index++)\n            this._lineTo(index, 0);\n\n        this._context.stroke();\n\n        this._context.beginPath();\n        this._context.lineWidth = 5;\n        this._context.strokeStyle = \"#C070C6\";\n        this._context.lineJoin = \"round\";\n        \n        this._moveTo(this._processor.tract.nose.start, -this._processor.tract.nose.offset);\n        for(let index = 1; index < this._processor.tract.nose.length; index++)\n            this._lineTo(index + this._processor.tract.nose.start, -this._processor.tract.nose.offset - this._processor.tract.nose.diameter[index] * 0.9);\n        \n        this._moveTo(this._processor.tract.nose.start + velumAngle, -this._processor.tract.nose.offset);\n        for(let index = Math.ceil(velumAngle); index < this._processor.tract.nose.length; index++)\n            this._lineTo(index + this._processor.tract.nose.start, -this._processor.tract.nose.offset);\n        \n        this._context.stroke();\n\n        this._context.globalAlpha = velum*5;\n        this._context.beginPath();\n        this._moveTo(this._processor.tract.nose.start - 2, 0);\n        this._lineTo(this._processor.tract.nose.start, -this._processor.tract.nose.offset);\n        this._lineTo(this._processor.tract.nose.start + velumAngle, -this._processor.tract.nose.offset);\n        this._lineTo(this._processor.tract.nose.start + velumAngle - 2, 0);\n        this._context.stroke();\n\n        this._context.fillStyle = \"orchid\";\n        this._context.font = \"20px Arial\";\n        this._context.textAlign = \"center\";\n        this._context.globalAlpha = 0.7;\n        this._drawText(this._processor.tract.length*0.95, 0.8 + 0.8*this._processor.tract.diameter[this._processor.tract.length-1], \" lip\", false);\n\n        this._context.globalAlpha = 1;\n        this._context.fillStyle = \"black\";\n        this._context.textAlign = \"left\";\n\n        this._drawPositions();\n\n        this._isDrawing = false;\n    }\n\n    _drawCircle(index, diameter, arcRadius) {\n        const angle = this._getAngle(index);\n        const radius = this._getRadius(index, diameter);\n\n        this._context.beginPath();\n        this._context.arc(this._getX(angle, radius), this._getY(angle, radius), arcRadius, 0, 2*Math.PI);\n        this._context.fill();\n    }\n    _drawTongueControl() {\n        this._context.lineCap = this._context.lineJoin = \"round\";\n        this._context.strokeStyle = this._context.fillStyle = \"#FFEEF5\"; // palePink\n        this._context.globalAlpha = 1.0;\n        this._context.beginPath();\n        this._context.lineWidth = 45;\n\n        this._moveTo(this._processor.tract.tongue.range.index.minValue, this._processor.tract.tongue.diameter.minValue); // diameter/2?\n        for(let index = this._processor.tract.tongue.range.index.minValue+1; index <= this._processor.tract.tongue.range.maxValue; index++) {\n            this._lineTo(index, this._processor.tract.tongue.range.diameter.minValue);\n        }\n        this._lineTo(this._processor.tract.tongue.range.index.center, this._processor.tract.tongue.range.diameter.maxValue);\n        this._context.closePath();\n        this._context.stroke();\n        this._context.fill();\n\n        this._context.fillStyle = \"orchid\";\n        this._context.globalAlpha = 0.3;\n\n        [0, -4.25, -8.5, 4.25, 8.5, -6.1, 6.1, 0, 0].forEach((indexOffset, _index) => {\n            const diameter = (_index < 5)?\n                this._processor.tract.tongue.range.diameter.minValue :\n                (_index < 8)?\n                    this._processor.tract.tongue.range.diameter.center :\n                    this._processor.tract.tongue.range.diameter.maxValue ;\n\n            this._drawCircle(this._processor.tract.tongue.range.index.center + indexOffset, diameter, 3)\n        });\n\n        const tongueAngle = this._getAngle(this._processor.tract.tongue.index);\n        const tongueRadius = this._getRadius(this._processor.tract.tongue.index, this._processor.tract.tongue.diameter)\n\n        this._context.lineWidth = 4;\n        this._context.strokeStyle = \"orchid\";\n        this._context.globalAlpha = 0.7;\n        this._context.beginPath();\n        this._context.arc(this._getX(tongueAngle, tongueRadius), this._getY(tongueAngle, tongueRadius), 18, 0, 2*Math.PI);\n        this._context.stroke();\n        this._context.globalAlpha = 0.15;\n        this._context.fill();\n        this._context.globalAlpha = 1;\n        this._context.fillStyle = \"orchid\";\n    }\n    _drawAmplitudes() {\n        this._context.strokeStyle = \"orchid\";\n        this._context.lineCap = \"butt\";\n        this._context.globalAlpha = 0.3;\n\n        for(let index = 2; index < this._processor.tract.length - 1; index++) {\n            this._context.beginPath();\n            this._context.lineWidth = Math.sqrt(this._processor.tract.amplitude.max[index]) *3;\n            \n            this._moveTo(index, 0);\n            this._lineTo(index, this._processor.tract.diameter[index]);\n\n            this._context.stroke();\n        }\n\n        for(let index = 1; index < this._processor.tract.nose.length - 1; index++) {\n            this._context.beginPath();\n            this._context.lineWidth = Math.sqrt(this._processor.tract.nose.amplitude.max[index])*3;\n            \n            this._moveTo(this._processor.tract.nose.start +index, -this._processor.tract.nose.offset);\n            this._lineTo(this._processor.tract.nose.start +index, -this._processor.tract.nose.offset - this._processor.tract.nose.diameter[index]*0.9);\n\n            this._context.stroke();\n        }\n\n        this._context.globalAlpha = 1;\n    }\n    _drawPositions() {\n        this._context.fillStyle = \"orchid\";\n        this._context.font = \"24px Arial\";\n        this._context.textAlign = \"center\";\n        this._context.globalAlpha = 0.6;\n\n        [\n            [15, 0.60, ''], // pat\n            [13, 0.27, 'a'], // part\n            [12, 0, ''], // pot\n            [17.7, 0.05, '()'], // port (rounded)\n            [27, 0.65, ''], // pit\n            [27.4, 0.21, 'i'], // peat\n            [20, 1.00, 'e'], // pet\n            [18.1, 0.37, ''], // putt\n            [23, 0.1, '(u)'], // poot (rounded)\n            [21, 0.6, ''], // pert [should be ]\n        ].forEach(position => {\n            const angle = position[0];\n            const radius = ((position[1] *1.5) +2);\n            const phoneme = position[2];\n            this._drawText(angle, radius, phoneme, false);\n        });\n\n        this._context.globalAlpha = 0.8;\n\n        const approximants = 1.1;\n        this._drawText(38, approximants, 'l', false);\n        this._drawText(41, approximants, 'w', false);\n\n        this._drawText(4.5, 0.37, 'h', false);\n\n        // setting up phoneme stuff\n        const phonemes = (this._parameters.intensity > 0)?\n            ['', 'z', 'v', 'g', 'd', 'b'] :\n            ['', 's', 'f', 'k', 't', 'p'] ;\n        phonemes.push('', 'n', 'm');\n\n        const fricatives = 0.3;\n        const stops = -0.4;\n        const nasals = -1.1;\n        [31.5, 36, 41, 22, 36, 41, 22, 36, 41].forEach((angle, _index) => {\n            const radius = (_index < 4)?\n                fricatives :\n                (_index < 6)?\n                    stops :\n                    nasals;\n\n            this._drawText(angle, radius, phonemes[_index], false);\n        });\n    }\n\n    _drawText(index, diameter, text, isStraight = true) {\n        const angle = this._getAngle(index);\n        const radius = this._getRadius(index, diameter);\n\n        this._context.save();\n        this._context.translate(this._getX(angle, radius), this._getY(angle, radius) + 2);\n        \n        if(!isStraight)\n            this._context.rotate(angle - Math.PI/2);\n        \n        this._context.fillText(text, 0, 0);\n        this._context.restore();\n    }\n    _moveTo(index, diameter) {\n        this.__to(index, diameter, true);\n    }\n    _lineTo(index, diameter) {\n        this.__to(index, diameter, false);\n    }\n    __to(index, diameter, moveTo = true) {\n        const wobble = this._getWobble(index);\n        const angle = this._getAngle(index, diameter) + wobble;\n        const radius = this._getRadius(index, diameter) + (100*wobble);\n        \n        const x = this._getX(angle, radius);\n        const y = this._getY(angle, radius);\n\n        if(moveTo)\n            this._context.moveTo(x, y);\n        else\n            this._context.lineTo(x, y);\n    }\n\n\n    _getX(angle, radius) {\n        return this._tract.origin.x - radius * Math.cos(angle)\n    }\n    _getY(angle, radius) {\n        return this._tract.origin.y - radius * Math.sin(angle)\n    }\n    \n    _getAngle(index) {\n        const angle = this._tract.angle.offset + index * this._tract.angle.scale * Math.PI / (this._processor.tract.lip.start - 1);\n        return angle;\n    }\n    _getWobble(index) {\n        var wobble = (this._processor.tract.amplitude.max[this._processor.tract.length - 1] + this._processor.tract.nose.amplitude.max[this._processor.tract.nose.length -1]);\n            wobble *= 0.03 * Math.sin(2 * index - 50 * (Date.now()/1000)) * index / this._processor.tract.length;\n        return wobble;\n    }\n    _getRadius(index, diameter) {\n        var radius = this._tract.radius - this._tract.scale * diameter;\n\n        return radius;\n    }\n\n    _getIndex(x, y) {\n        var angle = Math.atan2(y, x);\n            while(angle > 0) angle -= 2*Math.PI;\n\n        const index = (Math.PI + angle - this._tract.angle.offset) * (this._processor.tract.lip.start - 1) / (this._tract.angle.scale * Math.PI);\n        return index;\n    }\n    _getDiameter(x, y) {\n        const diameter = ((this._tract.radius - Math.sqrt((Math.pow(x, 2) + Math.pow(y, 2)))) / this._tract.scale);\n        return diameter;\n    }\n\n    _isNearTongue(index, diameter) {\n        var isTongue = true;\n        isTongue = isTongue && (this._processor.tract.tongue.range.index.minValue-4 <= index) && (index <= this._processor.tract.tongue.range.index.maxValue+4);\n        isTongue = isTongue && (this._processor.tract.tongue.range.diameter.minValue-0.5 <= diameter) && (diameter <= this._processor.tract.tongue.range.diameter.maxValue+0.5);\n        return isTongue;\n    }\n\n    _getEventX(event) {\n        const x = ((event.pageX - event.target.offsetLeft) * this._tract.scalar) - this._tract.origin.x;\n        return x;\n    }\n    _getEventY(event) {\n        const y = ((event.pageY - event.target.offsetTop) * this._tract.scalar) - this._tract.origin.y;\n        return y;\n    }\n\n    _getEventPosition(event) {\n        const x = this._getEventX(event);\n        const y = this._getEventY(event);\n\n        return {\n            index : this._getIndex(x, y),\n            diameter : this._getDiameter(x, y),\n        };\n    }\n\n    _setTongue(event, position) {\n        Object.keys(position).forEach(parameterNameSuffix => {\n            event.target.dispatchEvent(new CustomEvent(\"setParameter\", {\n                bubbles : true,\n                detail : {\n                    parameterName : \"tongue.\" + parameterNameSuffix,\n                    newValue : position[parameterNameSuffix],\n                }\n            }));    \n        });\n    }\n\n    _startEvent(event) {\n        const touchIdentifier = (event instanceof Touch)?\n            event.identifier :\n            -1;\n\n        if(this._touchConstrictionIndices[touchIdentifier] == undefined) {\n            const position = this._getEventPosition(event);\n            const isNearTongue = this._isNearTongue(position.index, position.diameter);\n            if(isNearTongue) {\n                this._touchConstrictionIndices[touchIdentifier] = -1;\n                this._setTongue(event, position);\n            }\n            else {\n                event.target.dispatchEvent(new CustomEvent(\"newConstriction\", {\n                    bubbles : true,\n                    detail : {\n                        touchIdentifier : touchIdentifier,\n                        index : position.index,\n                        diameter : position.diameter,\n                    }\n                }));\n            }\n        }\n    }\n    _moveEvent(event) {\n        const touchIdentifier = (event instanceof Touch)?\n            event.identifier :\n            -1;\n\n        if(this._touchConstrictionIndices[touchIdentifier] !== undefined) {\n            const position = this._getEventPosition(event);\n            const constrictionIndex = this._touchConstrictionIndices[touchIdentifier];\n            const isTongue = (constrictionIndex == -1);\n\n            if(isTongue) {\n                this._setTongue(event, position);\n            }\n            else {\n                event.target.dispatchEvent(new CustomEvent(\"setConstriction\", {\n                    bubbles : true,\n                    detail : {\n                        constrictionIndex : constrictionIndex,\n                        index : position.index,\n                        diameter : position.diameter,\n                    }\n                }));\n            }\n        }\n    }\n    _endEvent(event) {\n        const touchIdentifier = (event instanceof Touch)?\n            event.identifier :\n            -1;\n        \n        if(this._touchConstrictionIndices[touchIdentifier] !== undefined) {\n            const constrictionIndex = this._touchConstrictionIndices[touchIdentifier];\n            const isTongue = (constrictionIndex == -1);\n\n            if(isTongue) {\n                // do nothing\n            }\n            else {\n                event.target.dispatchEvent(new CustomEvent(\"removeConstriction\", {\n                    bubbles : true,\n                    detail : {\n                        constrictionIndex : constrictionIndex,\n                        touchIdentifier : touchIdentifier,\n                    }\n                }));\n            }\n\n            this._touchConstrictionIndices[touchIdentifier] = undefined;\n        }\n    }\n}\n\nexport default TractUI;","/*\n    TODO        \n        throttle value setter\n        set actual frequency range\n*/\n\nMath.clamp = function(value, min = 0, max = 1) {\n    return value < min?\n        min :\n        value < max?\n            value :\n            max;\n}\n\nclass GlottisUI {\n    constructor() {\n        this._frequency = {\n            min : 20,\n            max : 1000,\n            get range() {\n                return (this.max - this.min);\n            },\n\n            interpolate(interpolation) {\n                return this.min + (this.range * interpolation);\n            },\n        };\n        \n        this._isActive = false;\n        this._alwaysVoice = true;\n\n        this._container = document.createElement(\"div\");\n            this._container.style.border = \"solid red 1px\";\n            this._container.style.backgroundColor = \"pink\";\n            this._container.style.borderRadius = \"20px\";\n        \n        this._slider = document.createElement(\"div\");\n            this._slider.style.position = \"relative\";\n            this._slider.style.flex = 0;\n            this._slider.style.width = \"20px\";\n            this._slider.style.height = \"20px\";\n            this._slider.style.borderRadius = \"20px\";\n            this._slider.style.border = \"solid red 5px\";\n            this._slider.style.top = \"50%\";\n            this._slider.style.left = \"50%\";\n        this._container.appendChild(this._slider);\n\n        // EventListeners for setting the Parameters\n        this._container.addEventListener(\"mousedown\", event => {\n            this._isActive = true;\n            this._eventCallback(event);\n\n            if(!this._alwaysVoice)\n                this._container.dispatchEvent(new CustomEvent(\"setParameter\", {\n                    bubbles : true,\n                    detail : {\n                        parameterName : \"intensity\",\n                        newValue : 1,\n                        // type : \"linear\"\n                        // time : ?\n                    },\n                }));\n        });\n        this._container.addEventListener(\"mousemove\", event => {\n            this._eventCallback(event);\n        });\n        this._container.addEventListener(\"mouseup\", event => {\n            this._isActive = false;\n\n            if(this._alwaysVoice == false)\n                this._container.dispatchEvent(new CustomEvent(\"setParameter\", {\n                    bubbles : true,\n                    detail : {\n                        parameterName : \"intensity\",\n                        newValue : 0,\n                        // type : \"linear\"\n                        // time : ?\n                    },\n                }));\n        });\n\n        this._container.addEventListener(\"touchstart\", event => {\n            event.preventDefault();\n\n            if(!this._isActive) {\n                this._isActive = true;\n                const touch = event.changedTouches[0];\n                this._touchIdentifier = touch.identifier;\n                this._eventCallback(touch);\n\n                if(!this._alwaysVoice)\n                    this._container.dispatchEvent(new CustomEvent(\"setParameter\", {\n                        bubbles : true,\n                        detail : {\n                            parameterName : \"intensity\",\n                            newValue : 1,\n                            // type : \"linear\"\n                            // time : ?\n                        },\n                    }));\n            }\n        });\n        this._container.addEventListener(\"touchmove\", event => {\n            event.preventDefault();\n\n            const touch = Array.from(event.changedTouches).find(touch => touch.identifier == this._touchIdentifier);\n            \n            if(touch !== undefined)\n                this._eventCallback(touch);\n        });\n        this._container.addEventListener(\"touchend\", event => {\n            event.preventDefault();\n\n            if(this._isActive &&Array.from(event.changedTouches).some(touch => touch.identifier == this._touchIdentifier)) {\n                this._isActive = false;\n                this._touchIdentifier = -1;\n            }\n\n            if(!this._alwaysVoice)\n                this._container.dispatchEvent(new CustomEvent(\"setParameter\", {\n                    bubbles : true,\n                    detail : {\n                        parameterName : \"intensity\",\n                        newValue : 0,\n                        // type : \"linear\"\n                        // time : ?\n                    },\n                }));\n        });\n\n        this._container.addEventListener(\"message\", event => {\n            if(event.detail.type == \"toggleButton\") {\n                if(event.detail.parameterName == \"voice\") {\n                    this._alwaysVoice = event.detail.newValue == \"true\";\n                }\n            }\n        });\n\n\n        // Observe AnimationFrame\n        const mutationObserver = new MutationObserver((mutationsList, observer) => {\n            if(document.contains(this._container)) {\n\n                const customEvent = new CustomEvent(\"requestAnimationFrame\", {\n                    bubbles : true,\n                });\n                this._container.dispatchEvent(customEvent);\n\n                observer.disconnect();\n            }\n        });\n        mutationObserver.observe(document.body, {\n            subtree : true,\n            childList : true,\n        });\n\n\n        // AnimationFrame EventListener\n        this._container.addEventListener(\"animationFrame\", event => {\n            [\"frequency\", \"tenseness\"].forEach(parameterName => {\n                const customEvent = new CustomEvent(\"getParameter\", {\n                    bubbles : true,\n                    detail : {\n                        parameterName : parameterName,\n                        render : true,\n                    },\n                });\n                event.target.dispatchEvent(customEvent);\n            });\n        });\n\n\n        // EventListeners for Getting Parameters\n        this._container.addEventListener(\"didGetParameter\", event => {\n            if(event.detail.render == true) {\n                const parameterName = event.detail.parameterName;\n                const value = event.detail.value;\n\n                if([\"frequency\", \"tenseness\"].includes(parameterName)) {\n                    var interpolation;\n\n                    if(parameterName == \"frequency\") {\n                        interpolation = Math.clamp(((value-this._frequency.min)/this._frequency.range));\n                        this._slider.style.left = interpolation * this._container.offsetWidth - (this._slider.offsetWidth/2);\n                    }\n                    else {\n                        interpolation = 1 - ((Math.acos(1 - value) / (Math.PI*0.5)));\n                        this._slider.style.top = interpolation * this._container.offsetHeight - (this._slider.offsetHeight/2);\n                    }\n                }    \n            }\n            \n        });\n    }\n\n    get node() {\n        return this._container;\n    }\n\n    _eventCallback(event) {\n        if(this._isActive) {\n            const interpolation = {\n                vertical : Math.clamp((event.pageY - this._container.offsetTop)/this._container.offsetHeight, 0, 0.99),\n                horizontal : Math.clamp((event.pageX - this._container.offsetLeft)/this._container.offsetWidth, 0, 0.99),\n            };\n\n            const frequency = this._frequency.interpolate(interpolation.horizontal);\n            const tenseness = 1 - Math.cos((1 - interpolation.vertical) * Math.PI * 0.5);\n            const loudness = Math.pow(tenseness, 0.25);\n\n            const parameters = {\n                frequency : frequency,\n                tenseness : tenseness,\n                loudness : loudness,\n            };\n            \n            Object.keys(parameters).forEach(parameterName => {\n                this._container.dispatchEvent(new CustomEvent(\"setParameter\", {\n                    bubbles : true,\n                    detail : {\n                        parameterName : parameterName,\n                        newValue : parameters[parameterName],\n                    },\n                }));\n            });\n        }\n    }\n}\n\nexport default GlottisUI","/*\n    TODO\n        Toggle phonemes (voice/voiceless/none)\n        refactor button creation\n*/\n\nclass ButtonsUI {\n    constructor() {\n        this._container = document.createElement(\"div\");\n        this._container.style.display = \"flex\";\n        this._container.style.flexDirection = \"column\";\n\n        this._buttons = {\n            start : this._createButton(\"start\"),\n            wobble : this._createButton(\"wobble\", true, \"vibrato.wobble\"),\n            voice : this._createButton(\"voice\", true, \"intensity\"),\n        };\n\n        this._buttons.start.addEventListener(\"didResume\", event => {\n            event.target.parentElement.removeChild(event.target);\n        });\n        this._buttons.start.addEventListener(\"click\", event => {\n            event.target.dispatchEvent(new CustomEvent(\"resume\", {\n                bubbles : true,\n            }));\n\n        });\n    }\n\n    get node() {\n        return this._container;\n    }\n\n    _createButton(buttonName, isParameter = false, parameterPath) {\n        const button = document.createElement(\"button\");\n                button.id = buttonName;\n                button.value = true;\n                button.innerText = (isParameter? \"disable\":'') + buttonName;\n                button.style.width = \"100%\";\n                button.style.flex = 1;\n                button.style.margin = \"2px\";\n                button.style.borderRadius = \"20px\";\n                button.style.backgroundColor = \"pink\";\n                button.style.border = \"solid red\";\n            this._container.appendChild(button);\n\n            if(isParameter) {\n                button.addEventListener(\"click\", event => {\n                    button.value = (button.value == \"false\");\n\n                    const prefix = (button.value == \"true\")?\n                        \"disable\" :\n                        \"enable\";\n                    button.innerText = prefix + ' ' + button.id;\n                    \n                    button.dispatchEvent(new CustomEvent(\"setParameter\", {\n                        bubbles : true,\n                        detail : {\n                            parameterName : parameterPath || buttonName,\n                            newValue : (button.value == \"true\")? 1:0,\n                        }\n                    }));\n\n                    button.dispatchEvent(new CustomEvent(\"message\", {\n                        bubbles : true,\n                        detail : {\n                            type : \"toggleButton\",\n                            parameterName : buttonName,\n                            newValue : button.value,\n                        }\n                    }));\n                });\n            }\n        return button;\n    }\n}\n\nexport default ButtonsUI;","/*\n    TODO\n        .setFreqeuncyRange(min, max)\n*/\n\nimport TractUI from \"./TractUI.js\";\nimport GlottisUI from \"./GlottisUI.js\";\nimport ButtonsUI from \"./ButtonsUI.js\";\n\nclass PinkTromboneUI {\n    constructor() {\n        this._tractUI = new TractUI();\n        this._glottisUI = new GlottisUI();\n        this._buttonsUI = new ButtonsUI();\n\n        this._container = document.createElement(\"div\");\n            this._container.style.height = \"100%\";\n            this._container.style.width = \"100%\";\n\n            this._container.style.display = \"grid\";\n                this._container.style.gridTemplateRows = \"auto 200px 100px\";\n                this._container.style.gridTemplateColumns = \"auto 100px\";\n                this._container.style.gridRowGap = \"5px\";\n\n            this._container.appendChild(this._tractUI.node);\n                this._tractUI.node.id = \"tractUI\";\n                this._tractUI.node.style.gridColumn = \"1 / span 2\";\n                this._tractUI.node.style.gridRow = \"1 / span 2\";\n\n            this._container.appendChild(this._glottisUI.node);\n                this._glottisUI.node.id = \"glottisUI\";\n                this._glottisUI.node.style.gridColumn = \"1 / span 2\"\n                this._glottisUI.node.style.gridRow = \"3\";\n            \n            this._container.appendChild(this._buttonsUI.node);\n                this._buttonsUI.node.id = \"buttonsUI\";\n                this._buttonsUI.node.style.zIndex = 1;\n                this._buttonsUI.node.style.gridColumn = \"2\";\n                this._buttonsUI.node.style.gridRow = \"2\";\n            \n            this._container.addEventListener(\"message\", event => {\n                event.stopPropagation();\n                Array.from(this._container.children).forEach(child => {\n                    if(child !== event.target) {\n                        child.dispatchEvent(new CustomEvent(\"message\", {\n                            detail : event.detail,\n                        }));\n                    }\n                });\n            });\n    }\n\n    get node() {\n        return this._container;\n    }\n\n    show() {\n        this.node.style.display = \"grid\";\n    }\n    hide() {\n        this.node.style.display = \"none\";\n    }\n}\n\nexport default PinkTromboneUI;","/*\n    TODO\n        *\n*/\n\nimport {} from \"./PinkTrombone.js\";\nimport PinkTromboneUI from \"./graphics/PinkTromboneUI.js\";\n\nwindow.AudioContext = window.AudioContext || window.webkitAudioContext;\n\nclass PinkTromboneElement extends HTMLElement {\n    constructor() {\n        super();\n\n        this._animationFrameObservers = [];\n\n        window.customElements.whenDefined(\"pink-trombone\")\n            .then(() => {\n                // RequestAnimationFrame\n                this.addEventListener(\"requestAnimationFrame\", event => {\n                    if(!this._animationFrameObservers.includes(event.target))\n                        this._animationFrameObservers.push(event.target);\n\n                    const customEvent = new CustomEvent(\"didRequestAnimationFrame\");\n                    event.target.dispatchEvent(customEvent);\n\n                    event.stopPropagation();\n                });\n\n                this.addEventListener(\"resume\", event => {\n                    this.audioContext.resume();\n                    this.pinkTrombone.start();\n                    event.target.dispatchEvent(new CustomEvent(\"didResume\"));\n                });\n    \n                // Audio Parameters\n                this.addEventListener(\"setParameter\", event => {\n\n                    const parameterName = event.detail.parameterName;\n                    const audioParam = parameterName.split('.').reduce((audioParam, propertyName) => audioParam[propertyName], this.parameters);\n                    const newValue = Number(event.detail.newValue);\n\n                    switch(event.detail.type) {\n                        case \"linear\":\n                            audioParam.linearRampToValueAtTime(newValue, this.audioContext.currentTime + event.detail.timeOffset);\n                            break;\n                        default:\n                            audioParam.value = newValue;\n                    }\n\n                    event.target.dispatchEvent(new CustomEvent(\"didSetParameter\", {\n                        detail : event.detail,\n                    }));\n\n                    event.stopPropagation();\n                });\n\n                this.addEventListener(\"getParameter\", event => {\n                    const parameterName = event.detail.parameterName;\n                    const audioParam = parameterName.split('.').reduce((audioParam, propertyName) => audioParam[propertyName], this.parameters);\n\n                    const value = audioParam.value;\n                    \n                    const detail = event.detail;\n                        detail.value = value;\n\n                    event.target.dispatchEvent(new CustomEvent(\"didGetParameter\", {\n                        detail : detail,\n                    }));\n\n                    event.stopPropagation();\n                });\n\n                // Constrictions\n                this.addEventListener(\"newConstriction\", event => {\n                    const {index, diameter} = event.detail;\n                    const constriction = this.newConstriction(index, diameter);\n\n                    const detail = event.detail;\n                    detail.constrictionIndex = constriction._index;\n\n                    event.target.dispatchEvent(new CustomEvent(\"didNewConstriction\", {\n                        detail : detail,\n                    }));\n\n                    event.stopPropagation();\n                });\n                this.addEventListener(\"setConstriction\", event => {\n                    const constrictionIndex = Number(event.detail.constrictionIndex);\n                    const constriction = this.constrictions[constrictionIndex];\n\n                    if(constriction) {\n                        const {index, diameter} = event.detail;\n\n                        const indexValue = index || constriction.index.value;\n                        const diameterValue = diameter || constriction.diameter.value;\n\n                        switch(event.detail.type) {\n                            case \"linear\":\n                                constriction.index.linearRampToValueAtTime(indexValue, event.detail.endTime);\n                                constriction.diameter.linearRampToValueAtTime(diameterValue, event.detail.endTime);\n                                break;\n                            default:\n                                constriction.index.value = indexValue;\n                                constriction.diameter.value = diameterValue;\n                        }\n                        \n                        event.target.dispatchEvent(new CustomEvent(\"didSetConstriction\"));\n                    }\n                    \n                    event.stopPropagation();\n                });\n                this.addEventListener(\"getConstriction\", event => {\n                    const constrictionIndex = Number(event.detail.constrictionIndex);\n                    const constriction = this.constrictions[constrictionIndex];\n    \n                    event.target.dispatchEvent(new CustomEvent(\"didGetConstriction\", {\n                        detail : {\n                            index : constriction.index.value,\n                            diameter : constriction.diameter.value,\n                        },\n                    }));\n\n                    event.stopPropagation();\n                });\n                this.addEventListener(\"removeConstriction\", event => {\n                    const constrictionIndex = Number(event.detail.constrictionIndex);\n                    const constriction = this.constrictions[constrictionIndex];\n                    this.removeConstriction(constriction);\n\n                    const detail = event.detail;\n                    \n                    event.target.dispatchEvent(new CustomEvent(\"didRemoveConstriction\", {\n                        detail : detail,\n                    }));\n\n                    event.stopPropagation();\n                });\n\n                this.addEventListener(\"getProcessor\", event => {\n                    this.getProcessor()\n                        .then(processor => {\n                            event.target.dispatchEvent(new CustomEvent(\"didGetProcessor\", {\n                                detail : {\n                                    processor : processor,\n                                }\n                            }));        \n                        });\n\n                    event.stopPropagation();\n                });\n            });\n        \n        if(this.getAttribute(\"UI\") !== null)\n            this.enableUI();\n        \n        const loadEvent = new Event(\"load\");\n        this.dispatchEvent(loadEvent);\n    }\n\n    enableUI() {\n        if(this.UI == undefined) {\n            this.UI = new PinkTromboneUI();\n            this.appendChild(this.UI.node);\n        }\n\n        this.UI.show();\n    }\n    disableUI() {\n        if(this.UI !== undefined) {\n            this.UI.hide();\n            this.stopUI();\n        }\n    }\n\n    startUI() {\n        if(this.UI !== undefined) {\n            this._isRunning = true;\n            window.requestAnimationFrame(highResTimeStamp => {\n                this._requestAnimationFrameCallback(highResTimeStamp);\n            });    \n        }\n    }\n    stopUI() {\n        this._isRunning = false;\n    }\n\n    // getAttribute getter?\n    static get observedAttributes() {\n        return [\n            \"UI\",\n        ];\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        switch(name) {\n            case \"UI\":\n                if(newValue !== null)\n                    this.enableUI();\n                else\n                    this.disableUI();\n                break;\n            default:\n                break;\n        }\n    }\n\n    setAudioContext(audioContext = new window.AudioContext()) {\n        this.pinkTrombone = audioContext.createPinkTrombone();\n\n        this.loadPromise = this.pinkTrombone.loadPromise\n            .then(audioContext => {\n                this.parameters = this.pinkTrombone.parameters;\n\n                for(let parameterName in this.pinkTrombone.parameters)\n                    this[parameterName] = this.pinkTrombone.parameters[parameterName];\n\n                return this.pinkTrombone;\n            });\n        return this.loadPromise;\n    }\n    \n\n    get audioContext() {\n        if(this.pinkTrombone)\n            return this.pinkTrombone.audioContext;\n        else\n            throw \"Audio Context has not been set\";\n    }\n    set audioContext(audioContext) {\n        this.setAudioContext(audioContext);\n    }\n\n    connect() {\n        if(this.pinkTrombone)\n            return this.pinkTrombone.connect(...arguments);\n    }\n    disconnect() {\n        if(this.pinkTrombone)\n            return this.pinkTrombone.disconnect(...arguments);\n    }\n\n    start() {\n        if(this.pinkTrombone) {\n            this.pinkTrombone.start();\n            this.startUI();\n        }\n        else\n            throw \"Pink Trombone hasn't been set yet\";\n    }\n    stop() {\n        if(this.pinkTrombone) {\n            this.pinkTrombone.stop();\n            this.stopUI();\n        }\n        else\n            throw \"Pink Trombone hasn't been set yet\";\n    }\n\n    _requestAnimationFrameCallback(highResTimeStamp) {\n        if(this._isRunning) {\n            this._animationFrameObservers.forEach(element => {\n                const customEvent = new CustomEvent(\"animationFrame\", {\n                    detail : {\n                        highResTimeStamp : highResTimeStamp,\n                    }\n                });\n                element.dispatchEvent(customEvent);\n            });\n            window.requestAnimationFrame(_highResTimeStamp => this._requestAnimationFrameCallback.call(this, _highResTimeStamp));\n        }\n    }\n\n\n    // CONSTRICTIONS\n    get constrictions() {\n        return this.pinkTrombone.constrictions;\n    }\n    newConstriction() {\n        return this.pinkTrombone.newConstriction(...arguments);\n    }\n    removeConstriction(constriction) {\n        return this.pinkTrombone.removeConstriction(constriction);\n    }\n\n    getProcessor() {\n        return this.pinkTrombone.getProcessor();\n    }\n}\n\nif(document.createElement(\"pink-trombone\").constructor == HTMLElement) {\n    window.customElements.define(\"pink-trombone\", PinkTromboneElement);\n}\n\nexport default PinkTromboneElement;"],"sourceRoot":""}